<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Readings</title>
		<link href="styleReadingsPage.css" rel="stylesheet" type="text/css">
		<script type="text/javascript" src="sideBar.json"></script>
		<div class="navigation">
  			
		</div>
		<h4 class="logo" onClick="openNav()"><a herf="#">CRADLE</a></h4>
		<h4 class="exit"><a href="index.html">Log Out</a></h4> 
		
		<script>
        window.onload = function() {
										
            var http = new XMLHttpRequest();
			
			http.responseType = 'json';
			
            http.open("POST", "https://oyseokpdbi.execute-api.us-east-2.amazonaws.com/prod/cradleDownloadTest", true);
			
			
			var params= JSON.stringify({'httpMethod': 'POST', 'body':{'testType': localStorage.getItem("result")}});

            http.setRequestHeader("Content-type", "application/json; charset=utf-8");

            http.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
					var struct = this.response;
					
					if(localStorage.getItem("result") == "AirFlow"){
						
						var table = document.getElementById("data-table");
						var row = table.insertRow(0);
							
						var cell1 = row.insertCell(0);
						var cell2 = row.insertCell(1);
						var cell3 = row.insertCell(2);
						var cell4 = row.insertCell(3);
						
						cell1.innerHTML = "PID";
						cell2.innerHTML = "Test Date";
						cell3.innerHTML = "Intensity";
						cell4.innerHTML = "PPM";
						
        				for(var i=0; i<struct['body'].Items.length; i++){
							
							var row = table.insertRow(i+1);
							
							var cell1 = row.insertCell(0);
							var cell2 = row.insertCell(1);
							var cell3 = row.insertCell(2);
							var cell4 = row.insertCell(3);
							
							cell1.innerHTML = struct['body'].Items[i].PID;
							cell2.innerHTML = struct['body'].Items[i].TestDate;
							cell3.innerHTML = struct['body'].Items[i].Intensity;
							cell4.innerHTML = struct['body'].Items[i].PPM;
							
							
						}
						document.body.style.overflowY = "auto";
						
					}
					else if(localStorage.getItem("result") == "BodyPosition"){
						
						var table = document.getElementById("data-table");
						var row = table.insertRow(0);
							
						var cell1 = row.insertCell(0);
						var cell2 = row.insertCell(1);
						var cell3 = row.insertCell(2);
						var cell4 = row.insertCell(3);
						var cell5 = row.insertCell(4);
						
						cell1.innerHTML = "PID";
						cell2.innerHTML = "Test Date";
						cell3.innerHTML = "X-Values";
						cell4.innerHTML = "Y-Values";
						cell5.innerHTML = "Z-Values";
						
        				for(var i=0; i<struct['body'].Items.length; i++){
							
							var row = table.insertRow(i+1);
							
							var cell1 = row.insertCell(0);
							var cell2 = row.insertCell(1);
							var cell3 = row.insertCell(2);
							var cell4 = row.insertCell(3);
							var cell5 = row.insertCell(4);
							
							cell1.innerHTML = struct['body'].Items[i].PID;
							cell2.innerHTML = struct['body'].Items[i].TestDate;
							cell3.innerHTML = struct['body'].Items[i].XValues;
							cell4.innerHTML = struct['body'].Items[i].YValues;
							cell5.innerHTML = struct['body'].Items[i].ZValues;
							
							
						}
						document.body.style.overflowY = "auto";
						
					}
					else if(localStorage.getItem("result") == "ECG"){
						
						var table = document.getElementById("data-table");
						var row = table.insertRow(0);
							
						var cell1 = row.insertCell(0);
						var cell2 = row.insertCell(1);
						var cell3 = row.insertCell(2);
						var cell4 = row.insertCell(3);
						
						cell1.innerHTML = "PID";
						cell2.innerHTML = "Test Date";
						cell3.innerHTML = "BPM";
						cell4.innerHTML = "Signal";
						
        				for(var i=0; i<struct['body'].Items.length; i++){
							
							var row = table.insertRow(i+1);
							
							var cell1 = row.insertCell(0);
							var cell2 = row.insertCell(1);
							var cell3 = row.insertCell(2);
							var cell4 = row.insertCell(3);
							
							cell1.innerHTML = struct['body'].Items[i].PID;
							cell2.innerHTML = struct['body'].Items[i].TestDate;
							cell3.innerHTML = struct['body'].Items[i].BPM;
							cell4.innerHTML = struct['body'].Items[i].Signal;
							
							
						}
						document.body.style.overflowY = "auto";
						
					}
					else if(localStorage.getItem("result") == "EMG"){
						
						var table = document.getElementById("data-table");
						var row = table.insertRow(0);
							
						var cell1 = row.insertCell(0);
						var cell2 = row.insertCell(1);
						var cell3 = row.insertCell(2);
						var cell4 = row.insertCell(3);
						
						cell1.innerHTML = "PID";
						cell2.innerHTML = "Test Date";
						cell3.innerHTML = "CPM";
						cell4.innerHTML = "Signal";
						
        				for(var i=0; i<struct['body'].Items.length; i++){
							
							var row = table.insertRow(i+1);
							
							var cell1 = row.insertCell(0);
							var cell2 = row.insertCell(1);
							var cell3 = row.insertCell(2);
							var cell4 = row.insertCell(3);
							
							cell1.innerHTML = struct['body'].Items[i].PID;
							cell2.innerHTML = struct['body'].Items[i].TestDate;
							cell3.innerHTML = struct['body'].Items[i].CPM;
							cell4.innerHTML = struct['body'].Items[i].Signal;
							
							
						}
						document.body.style.overflowY = "auto";
					
					}
					else if(localStorage.getItem("result") == "GSR"){
						
						var table = document.getElementById("data-table");
						var row = table.insertRow(0);
							
						var cell1 = row.insertCell(0);
						var cell2 = row.insertCell(1);
						var cell3 = row.insertCell(2);
						var cell4 = row.insertCell(3);
						
						cell1.innerHTML = "PID";
						cell2.innerHTML = "Test Date";
						cell3.innerHTML = "Conductance";
						cell4.innerHTML = "Resistance";
						
        				for(var i=0; i<struct['body'].Items.length; i++){
							
							var row = table.insertRow(i+1);
							
							var cell1 = row.insertCell(0);
							var cell2 = row.insertCell(1);
							var cell3 = row.insertCell(2);
							var cell4 = row.insertCell(3);
							
							cell1.innerHTML = struct['body'].Items[i].PID;
							cell2.innerHTML = struct['body'].Items[i].TestDate;
							cell3.innerHTML = struct['body'].Items[i].GSRConductanceResults;
							cell4.innerHTML = struct['body'].Items[i].GSRResistanceResults;
							
							
						}
						
						document.body.style.overflowY = "auto";
					}
					//SPO2 to be made...
				}
                else {
                    
                }
            };
            http.send(params);

        }
    </script>
		
	</head>
	
	<body>
		<div id="mySidenav" class="sidenav">
 			 <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  			<a href="main.html">About</a>
  			<a href="sensors.html">Sensors</a>
  			<a href="#">Analysis</a>
		</div>

		<!--<div id="main">
					<input type="button" class="btn-primary btn-block btn-large tag" style="text-decoration:none;" value="View" id="submit" onClick="callAwsLambdaFunction()"/>
			<h5 id="server1"></h5>
			
		</div>-->
		<div id="myTable">
			<table id="data-table" class="table table-striped table-bordered nowrap" width="100%" align="center">
                    
                    
			</table>
		</div>
    </body>
</html>